# Cloud Cost Analyzer ä½¿ç”¨æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…
```bash
git clone https://github.com/songqipeng/cloud-cost-analyzer.git
cd cloud-cost-analyzer
pip install -e .
```

### é…ç½®äº‘æœåŠ¡å‡­è¯
```bash
# é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªäº‘å¹³å°é…ç½®å‡­è¯

# AWS
export AWS_ACCESS_KEY_ID="AKIA..."
export AWS_SECRET_ACCESS_KEY="..."
export AWS_DEFAULT_REGION="us-east-1"

# é˜¿é‡Œäº‘
export ALIBABA_CLOUD_ACCESS_KEY_ID="LTAI..."
export ALIBABA_CLOUD_ACCESS_KEY_SECRET="..."

# è…¾è®¯äº‘
export TENCENTCLOUD_SECRET_ID="AKIDxxx..."
export TENCENTCLOUD_SECRET_KEY="..."

# ç«å±±äº‘
export VOLCENGINE_ACCESS_KEY_ID="AKLT..."
export VOLCENGINE_SECRET_ACCESS_KEY="..."
```

## ğŸ“Š ä½¿ç”¨æ–¹æ³•

### æ£€æŸ¥è¿æ¥çŠ¶æ€
```bash
python cloud_cost_analyzer.py config
```

### å¿«é€Ÿåˆ†æï¼ˆæ¨èï¼‰
```bash
# è‡ªåŠ¨é€‰æ‹©ç¬¬ä¸€ä¸ªå¯ç”¨çš„äº‘å¹³å°ï¼Œåˆ†æè¿‡å»1å¹´è´¹ç”¨
python cloud_cost_analyzer.py quick
```

### å¤šäº‘å¯¹æ¯”åˆ†æ
```bash
# å¯¹æ¯”æ‰€æœ‰å·²é…ç½®çš„äº‘å¹³å°è´¹ç”¨
python cloud_cost_analyzer.py multi-cloud
```

### è‡ªå®šä¹‰æ—¶é—´èŒƒå›´åˆ†æ
```bash
# æŒ‡å®šæ—¶é—´èŒƒå›´
python cloud_cost_analyzer.py custom --start 2024-01-01 --end 2024-12-31
```

## ğŸ”§ è¾“å‡ºé€‰é¡¹

```bash
# æŒ‡å®šè¾“å‡ºç›®å½•
python cloud_cost_analyzer.py multi-cloud --output ./reports

# æŒ‡å®šè¾“å‡ºæ ¼å¼
python cloud_cost_analyzer.py quick --format txt
python cloud_cost_analyzer.py quick --format html  
python cloud_cost_analyzer.py quick --format all
```

## ğŸ“‹ è¾“å‡ºç¤ºä¾‹

### å¤šäº‘è´¹ç”¨å¯¹æ¯”
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ äº‘å¹³å°       â”ƒ       æ€»è´¹ç”¨ â”ƒ  è´§å¸   â”ƒ å¹³å‡æ¯æ—¥è´¹ç”¨ â”ƒ
â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©
â”‚ AWS          â”‚        34.07 â”‚   USD   â”‚        17.03 â”‚
â”‚ é˜¿é‡Œäº‘       â”‚       125.50 â”‚   CNY   â”‚        62.75 â”‚
â”‚ è…¾è®¯äº‘       â”‚        89.20 â”‚   CNY   â”‚        44.60 â”‚
â”‚ ç«å±±äº‘       â”‚        67.80 â”‚   CNY   â”‚        33.90 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç”Ÿæˆçš„æŠ¥å‘Šæ–‡ä»¶
```
reports/
â”œâ”€â”€ multi_cloud_cost_analysis_20250906_182315.txt
â”œâ”€â”€ multi_cloud_cost_analysis_20250906_182315.html
â”œâ”€â”€ aws_cost_analysis_20250906_184620.txt
â””â”€â”€ aws_cost_analysis_20250906_184620.html
```

## âš™ï¸ é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰

åˆ›å»º `config.json` æ–‡ä»¶è¿›è¡Œé«˜çº§é…ç½®ï¼š

```json
{
  "cache": {
    "enabled": true,
    "type": "memory"
  },
  "notifications": {
    "email": {
      "enabled": true,
      "smtp_server": "smtp.gmail.com",
      "sender_email": "your-email@gmail.com",
      "recipient_email": "recipient@example.com"
    }
  }
}
```

## â° å®šæ—¶ä»»åŠ¡

```bash
# æ·»åŠ åˆ° crontabï¼Œæ¯å¤©æ—©ä¸Š8ç‚¹è‡ªåŠ¨åˆ†æ
crontab -e

# æ·»åŠ ä»¥ä¸‹è¡Œ
0 8 * * * cd /path/to/cloud-cost-analyzer && python cloud_cost_analyzer.py multi-cloud >> cron.log 2>&1
```

## ğŸ†˜ é—®é¢˜æ’æŸ¥

### è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡
env | grep -E "(AWS|ALIBABA|TENCENT|VOLCENGINE)"

# è¯¦ç»†é”™è¯¯ä¿¡æ¯
python cloud_cost_analyzer.py config 2>&1 | tee debug.log
```

### API æƒé™è¦æ±‚
- **AWS**: `ce:GetCostAndUsage`, `ce:GetDimensionValues`
- **é˜¿é‡Œäº‘**: `AliyunBSSReadOnlyAccess` 
- **è…¾è®¯äº‘**: `QcloudBillingReadOnlyAccess`
- **ç«å±±äº‘**: `BillingReadOnlyAccess`

è¯¦ç»†é…ç½®æŒ‡å—ï¼š[API_KEYS_GUIDE.md](./API_KEYS_GUIDE.md)